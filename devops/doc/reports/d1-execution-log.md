# Sprint D1 - –õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–î–∞—Ç–∞:** 2025-10-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –í–´–ü–û–õ–ù–ï–ù–û

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏

### ‚úÖ –®–∞–≥ 1: –ö–æ–º–º–∏—Ç —Ñ–∞–π–ª–æ–≤

```bash
git checkout -b workflow/gh-actions-build
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–æ–≤–∞—è –≤–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞

---

### ‚úÖ –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ staging area

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ 14 —Ñ–∞–π–ª–æ–≤ Sprint D1:

```
.github/workflows/build.yml (82 —Å—Ç—Ä–æ–∫–∏)
.github/REGISTRY.md (55 —Å—Ç—Ä–æ–∫)
docker-compose.registry.yml (45 —Å—Ç—Ä–æ–∫)
scripts/registry-pull.sh (63 —Å—Ç—Ä–æ–∫–∏)
docs/github-actions-guide.md (284 —Å—Ç—Ä–æ–∫–∏)
docs/REGISTRY.md (270 —Å—Ç—Ä–æ–∫)
README.md (–æ–±–Ω–æ–≤–ª–µ–Ω, +29 —Å—Ç—Ä–æ–∫)
DOCKER.md (–æ–±–Ω–æ–≤–ª–µ–Ω, +32 —Å—Ç—Ä–æ–∫–∏)
docker-compose.yml (–æ–±–Ω–æ–≤–ª–µ–Ω, +8 —Å—Ç—Ä–æ–∫)
Makefile (–æ–±–Ω–æ–≤–ª–µ–Ω, +22 —Å—Ç—Ä–æ–∫–∏)
devops/doc/reports/d1-verification.md (358 —Å—Ç—Ä–æ–∫)
devops/doc/reports/d1-summary.md (174 —Å—Ç—Ä–æ–∫–∏)
devops/doc/reports/d1-commit-checklist.md (155 —Å—Ç—Ä–æ–∫)
.cursor/plans/spri-622e4fb4.plan.md (–ø–ª–∞–Ω)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã  
**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** 14 —Ñ–∞–π–ª–æ–≤, 1861 –≤—Å—Ç–∞–≤–∫–∞ (+)

---

### ‚úÖ –®–∞–≥ 3: –ö–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º

```bash
git commit -m "D1: Add GitHub Actions CI/CD and registry support"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–æ–º–º–∏—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω  
**Commit hash:** `176b476`  
**–°–æ–æ–±—â–µ–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

---

### ‚úÖ –®–∞–≥ 4: Push –Ω–∞ origin

```bash
git push -u origin workflow/gh-actions-build
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–µ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ push'–µ–Ω–∞  
**URL –¥–ª—è PR:** https://github.com/sema94504/aidialogs/pull/new/workflow/gh-actions-build

**GitHub Response:**
```
‚úì new branch workflow/gh-actions-build created on origin
‚úì branch tracking configured
‚úì PR creation URL provided
```

---

## üîî –ß—Ç–æ –¥–∞–ª—å—à–µ (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ GitHub)

### ‚è≥ –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ Pull Request

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ: https://github.com/sema94504/aidialogs/pull/new/workflow/gh-actions-build
2. –ò–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub ‚Üí Pull requests ‚Üí New PR
3. –í—ã–±—Ä–∞—Ç—å:
   - base: `main`
   - compare: `workflow/gh-actions-build`
4. –ù–∞–∂–∞—Ç—å "Create pull request"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç workflow
- Workflow –±—É–¥–µ—Ç –≤ –≤–∫–ª–∞–¥–∫–µ "Actions"
- –°–±–æ—Ä–∫–∞ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç

---

### ‚è≥ –®–∞–≥ 6: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ workflow –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –í–∫–ª–∞–¥–∫–∞ "Actions"
3. –í—ã–±—Ä–∞—Ç—å workflow "Build & Publish Docker Images"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å job'–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
   - bot - –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ
   - api - –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ
   - frontend - –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:** 5-10 –º–∏–Ω—É—Ç

**–ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ:**
- ‚úì 3 job'–∞ –∑–∞–≤–µ—Ä—à–µ–Ω—ã (bot, api, frontend)
- ‚úì –û–±—Ä–∞–∑—ã —Å–æ–±—Ä–∞–Ω—ã –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ GHCR
- ‚úì –°—Ç–∞—Ç—É—Å = –∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úì

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ workflow
- –û–±—ã—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: Docker build –æ—à–∏–±–∫–∏, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

---

### ‚è≥ –®–∞–≥ 7: –°–¥–µ–ª–∞—Ç—å –æ–±—Ä–∞–∑—ã –ø—É–±–ª–∏—á–Ω—ã–º–∏

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–±—Ä–∞–∑—ã –ø—É–±–ª–∏—á–Ω—ã–º–∏:

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://github.com/YOUR_USERNAME/packages
   (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_USERNAME –Ω–∞ –≤–∞—à–µ –∏–º—è –Ω–∞ GitHub)

2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–∑–∞ (aidialogs-bot, aidialogs-api, aidialogs-frontend):
   - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ø–∞–∫–µ—Ç
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ "Package settings"
   - –ù–∞–∂–∞—Ç—å "Manage repository access"
   - –ò–∑–º–µ–Ω–∏—Ç—å visibility –Ω–∞ "Public"
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ GitHub CLI (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**
```bash
gh api repos/YOUR_USERNAME/aidialogs/packages -X PATCH -f visibility=public
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±—Ä–∞–∑—ã —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

### ‚è≥ –®–∞–≥ 8: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

–î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è workflow –∏ —Å–¥–µ–ª–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –ø—É–±–ª–∏—á–Ω—ã–º–∏, –∑–∞—Ç–µ–º:

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑—ã –∏–∑ registry
make registry-pull GITHUB_USER=your-github-username

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make registry-up GITHUB_USER=your-github-username

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
docker-compose -f docker-compose.registry.yml ps

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint
curl http://localhost:8000/health

# 5. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make registry-down
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úì –û–±—Ä–∞–∑—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (docker pull —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫)
- ‚úì –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å (—Å—Ç–∞—Ç—É—Å UP)
- ‚úì Health endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
- ‚úì –°–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø–æ—Ä—Ç–∞–º 3000 (frontend) –∏ 8000 (api)

---

### ‚è≥ –®–∞–≥ 9: –°–ª–∏—è–Ω–∏–µ PR –≤ main

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –í–∫–ª–∞–¥–∫–∞ "Pull requests"
3. –ù–∞–π—Ç–∏ PR "D1: Add GitHub Actions CI/CD and registry support"
4. –ù–∞–∂–∞—Ç—å "Merge pull request"
5. –í—ã–±—Ä–∞—Ç—å "Confirm merge"
6. –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É –ø–æ—Å–ª–µ merge'–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úì PR —Å–ª–∏—Ç –≤ main
- ‚úì –í—Å–µ –∫–æ–º–º–∏—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ main
- ‚úì Workflow –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –µ—â–µ —Ä–∞–∑ –Ω–∞ main
- ‚úì –û–±—Ä–∞–∑—ã –ø–µ—Ä–µ—Å–æ–±–µ—Ä—É—Ç—Å—è —Å —Ç–µ–≥–æ–º `latest`

---

## üéØ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ç–∞—Ç—É—Å | –í—ã–ø–æ–ª–Ω–µ–Ω–æ |
|-----|----------|--------|-----------|
| 1 | –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 2 | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 3 | –ö–æ–º–º–∏—Ç | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 4 | Push –Ω–∞ origin | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 5 | –°–æ–∑–¥–∞–Ω–∏–µ PR | ‚è≥ | **–†–£–ß–ù–û –Ω–∞ GitHub** |
| 6 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ workflow | ‚è≥ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ø–æ—Å–ª–µ PR) |
| 7 | –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø | ‚è≥ | **–†–£–ß–ù–û –Ω–∞ GitHub** |
| 8 | –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚è≥ | **–†–£–ß–ù–û –ª–æ–∫–∞–ª—å–Ω–æ** |
| 9 | –°–ª–∏—è–Ω–∏–µ PR | ‚è≥ | **–†–£–ß–ù–û –Ω–∞ GitHub** |

---

## üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–æ–≤

### GitHub Repository Info
- **Owner:** sema94504
- **Repo:** aidialogs
- **Branch:** workflow/gh-actions-build
- **PR URL:** https://github.com/sema94504/aidialogs/pull/new/workflow/gh-actions-build

### Workflow Info
- **File:** .github/workflows/build.yml
- **Name:** Build & Publish Docker Images
- **Services:** bot, api, frontend
- **Registry:** ghcr.io
- **Trigger:** push, pull_request, tags

### Image Registry Info
- **Bot:** ghcr.io/sema94504/aidialogs-bot:latest
- **API:** ghcr.io/sema94504/aidialogs-api:latest
- **Frontend:** ghcr.io/sema94504/aidialogs-frontend:latest

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å:

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ main
git checkout main

# –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É
git branch -D workflow/gh-actions-build

# –£–¥–∞–ª–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—É—é –≤–µ—Ç–∫—É
git push origin --delete workflow/gh-actions-build

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É —Å –Ω—É–ª—è
git checkout -b workflow/gh-actions-build
```

---

## üìù –û—Ç—á–µ—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `devops/doc/reports/d1-summary.md` - –°–≤–æ–¥–∫–∞
- `devops/doc/reports/d1-verification.md` - –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- `devops/doc/reports/d1-commit-checklist.md` - –ß–µ–∫-–ª–∏—Å—Ç
- `devops/doc/reports/d1-execution-log.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª (–ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `docs/github-actions-guide.md` - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ GitHub Actions
- `docs/REGISTRY.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –æ–±—Ä–∞–∑–æ–≤
- `README.md` - –û–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

---

**–≠—Ç–∞–ø 1-4 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é!**

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —à–∞–≥–∞–º 5-9 –Ω–∞ GitHub

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —á–∞—Å—Ç–∏:** 2025-10-18 12:12 UTC

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- PR Creation: https://github.com/sema94504/aidialogs/pull/new/workflow/gh-actions-build
- Packages: https://github.com/sema94504/packages
- Actions: https://github.com/sema94504/aidialogs/actions
- Commits: https://github.com/sema94504/aidialogs/commits/workflow/gh-actions-build
