# VS Code / Cursor Configuration

Настройки для разработки проекта в VS Code/Cursor.

## Запуск тестов

### Через UI

1. **Откройте панель тестирования:**
   - Нажмите иконку колбы в боковой панели (Testing)
   - Или используйте Command Palette: `Testing: Focus on Test Explorer View`

2. **Обнаружение тестов:**
   - VS Code/Cursor автоматически обнаружит тесты при открытии проекта
   - Если нет, нажмите кнопку "Refresh Tests" (🔄)

3. **Запуск тестов:**
   - **Все тесты:** нажмите ▶️ рядом с "tests"
   - **Файл тестов:** нажмите ▶️ рядом с файлом (например, `test_bot.py`)
   - **Конкретный тест:** нажмите ▶️ рядом с тестом (например, `test_start_handler`)

4. **Отладка тестов:**
   - Нажмите 🐛 рядом с тестом для запуска в режиме отладки
   - Установите breakpoints в коде теста или тестируемого модуля

### Через терминал

```bash
make test       # Все тесты
make coverage   # С покрытием
```

## Запуск бота

### Через UI

1. **Откройте Debug Panel:**
   - Нажмите иконку "Run and Debug" (▶️🐛) в боковой панели
   - Или F5

2. **Выберите конфигурацию:**
   - "Python: Run Bot" - запуск бота с дебагом

3. **Запустите:**
   - Нажмите зеленую кнопку ▶️ или F5
   - Бот запустится в integrated terminal

### Через терминал

```bash
make run
```

## Форматирование и линтинг

### Автоматически

- **При сохранении:** код автоматически форматируется через Ruff
- **Imports:** автоматически организуются при сохранении

### Вручную

- **Format Document:** `Shift+Alt+F` (или `Cmd+Shift+P` -> "Format Document")
- **Organize Imports:** `Cmd+Shift+P` -> "Organize Imports"

### Через терминал

```bash
make format     # Форматирование
make lint       # Проверка стиля
make typecheck  # Проверка типов
```

## Рекомендуемые расширения

При открытии проекта VS Code/Cursor предложит установить:

1. **Python** (ms-python.python) - основное расширение для Python
2. **Pylance** (ms-python.vscode-pylance) - быстрый language server
3. **Ruff** (charliermarsh.ruff) - линтер и форматтер

## Настройки проекта

### Testing
- Pytest включен по умолчанию
- Coverage включен в аргументах тестов
- Автоматическое обнаружение при сохранении

### Formatting
- Форматирование при сохранении: ✅
- Длина строки: 100 символов
- Форматтер: Ruff

### Type Checking
- Режим: basic
- Автоматические импорты: ✅

### Editor
- Линейка на 100 символах
- Скрытие служебных файлов (__pycache__, .coverage, etc.)

## Структура файлов

```
.vscode/
├── settings.json      # Настройки проекта
├── launch.json        # Конфигурации запуска/отладки
├── extensions.json    # Рекомендуемые расширения
└── README.md          # Эта инструкция
```

## Troubleshooting

### Тесты не обнаруживаются

1. Убедитесь что установлено расширение Python
2. Проверьте что выбран правильный интерпретатор: `Cmd+Shift+P` -> "Python: Select Interpreter" -> выберите `.venv/bin/python`
3. Перезагрузите окно: `Cmd+Shift+P` -> "Developer: Reload Window"
4. Проверьте что зависимости установлены: `uv sync --extra dev`

### Ruff не работает

1. Установите расширение Ruff из Marketplace
2. Перезагрузите окно
3. Проверьте что Ruff установлен: `uv run ruff --version`

### Интерпретатор не найден

1. Создайте виртуальное окружение: `uv sync`
2. Выберите интерпретатор: `Cmd+Shift+P` -> "Python: Select Interpreter"
3. Выберите `.venv/bin/python`

